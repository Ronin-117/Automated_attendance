<!DOCTYPE html>
<html>
<head>
    <title>Camera Feed</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

    <div class="banner">
        <div class="contents">
            <div style="display:flex; justify-content: center">
                <h1 class="header">ATTENDENCE MANAGEMENT SYSTEM</h1>
            </div>
              <div style="display: flex; margin-top: 60px;justify-content: center">
                <div>
                  <button id="Start_b" class="start"><span>START</span></button>
                  <script>
                    document.getElementById('Start_b').addEventListener('click', () => {
                        fetch('/st_inf', {
                            method: 'POST'
                        })
                        .then(response => {
                            if (response.ok) {
                                console.log('Function executed successfully');
                            } else {
                                console.error('Function execution failed');
                            }
                        })
                        .catch(error => console.error('Error:', error));
                    });
                </script>
                </div>
                <div>
                  <button id="End_b" class="stop"><span>STOP</span></button>
                  <script>
                    document.getElementById('End_b').addEventListener('click', () => {
                        fetch('/ed_inf', {
                            method: 'POST'
                        })
                        .then(response => {
                            if (response.ok) {
                                console.log('Function executed successfully');
                            } else {
                                console.error('Function execution failed');
                            }
                        })
                        .catch(error => console.error('Error:', error));
                    });
                </script>
                </div>
                <div>
                  <button class="stop" id="clr_csv"><span>CLEAR</span></button>
                  <script>
                    document.getElementById('clr_csv').addEventListener('click', () => {
                        fetch('/clear_csv', {
                            method: 'POST'
                        })
                        .then(response => {
                            if (response.ok) {
                                console.log('Function executed successfully');
                            } else {
                                console.error('Function execution failed');
                            }
                        })
                        .catch(error => console.error('Error:', error));
                    });
                </script>
                
                </div>
              </div>
              
        </div>


      <div >
        <div class="dropdown">
            <button>year</button>
            <div class="content">
              <a href="">2020-24</a>
              <a href="">2021-25</a>
              <a href="">2022-26</a>
              <a href="">2023-27</a>
              <a href="">2024-28</a>
            </div>
          <div>
           
    </div>
    
    </div>
    <div class="new">
      <div >
        
        <img src="{{ url_for('video_feed') }}" width="30%" height="auto" id="pic"> 
        </div>
  
        <div class="csvTable">
          <h1>CSV Display</h1>
          <table id="csvTable">
              <thead>
                  <tr>
                      <!-- Headers will be populated here -->
                  </tr>
              </thead>
              <tbody>
                  <!-- Data will be populated here -->
              </tbody>
          </table>
          
          <script>

              function fetchCSV() {
                  fetch('/get_csv')
                      .then(response => response.text())
                      .then(data => {
                          const rows = data.split('\n').filter(row => row);
                          const table = document.getElementById('csvTable');
                          const thead = table.querySelector('thead');
                          const tbody = table.querySelector('tbody');
                          
                          // Clear existing table content
                          thead.innerHTML = '';
                          tbody.innerHTML = '';
                          
                          // Create table headers
                          const headers = rows[0].split(',');
                          let theadHtml = '<tr>';
                          headers.forEach(header => {
                              theadHtml += `<th>${header}</th>`;
                          });
                          theadHtml += '</tr>';
                          thead.innerHTML = theadHtml;
      
                          // Create table rows
                          rows.slice(1).forEach(row => {
                              const cells = row.split(',');
                              let rowHtml = '<tr>';
                              cells.forEach(cell => {
                                  rowHtml += `<td>${cell}</td>`;
                              });
                              rowHtml += '</tr>';
                              tbody.innerHTML += rowHtml;
                          });
                      })
                      .catch(error => console.error('Error fetching CSV:', error));
              }
      
              // Fetch CSV data every 5 seconds
              setInterval(fetchCSV, 5000);
              
              // Initial fetch
              fetchCSV();
          </script>
          </div>
    </div>
    
      </div>
    </div>
    
    
    
</body>
</html>

<style>
    * {
      margin: 0;
      padding: 0;
      font-family: sans-serif;
    }
  
    .banner {
      width: 100%;
      height: 100vh;
      background-image: linear-gradient(rgba(0, 0, 0.50), rgba(0, 0, 0, 0.50)),
        url(background.jpg);
      background-size: cover;
      background-position: center;
    }
    
    .header {
    text-align: center;
    background-color: #000;
    font-family:cursive;
    font-size: 30px;
    font-weight: bold;
    color: white;
    width: 500px;
    
    border-radius: 60px;
    padding: 10px;
  
    margin-top: 75px;
  }
  
  .start,
  .start *,
  .start :after,
  .start :before,
  .start:after,
  .start:before {
    border: 0 solid;
    box-sizing: border-box;
  }
  .start {
    -webkit-tap-highlight-color: transparent;
    -webkit-appearance: button;
    background-color: #000;
    background-image: none;
    color: #fff;
    cursor: pointer;
    font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
      Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif,
      Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
    font-size: 100%;
    font-weight: 900;
    line-height: 1.5;
    margin: 0;
    margin-right: 100px;
    -webkit-mask-image: -webkit-radial-gradient(#000, #fff);
    padding: 0;
    text-transform: uppercase;
  }
  .start:disabled {
    cursor: default;
  }
  .start:-moz-focusring {
    outline: auto;
  }
  .start svg {
    display: block;
    vertical-align: middle;
  }
  .start [hidden] {
    display: none;
  }
.new {
  display: flex;
}

  .start {
    border-radius: 99rem;
    border-width: 2px;
    overflow: hidden;
    padding: 0.8rem 3rem;
    position: relative;
  }
  .start span {
    mix-blend-mode: difference;
  }
  .start:before {
    background: #fff;
    content: "";
    display: block;
    height: 100%;
    left: -100%;
    position: absolute;
    top: 0;
    transform: skew(0deg) translateX(-20%);
    transition: transform 0.2s ease;
    width: 120%;
  }
  .start:hover:before {
    transform: skew(45deg) translateX(75%);
  }
  
  .stop,
  .stop *,
  .stop :after,
  .stop :before,
  .stop:after,
  .stop:before {
    border: 0 solid;
    box-sizing: border-box;
  }
  .stop {
    -webkit-tap-highlight-color: transparent;
    -webkit-appearance: button;
    background-color: #000;
    background-image: none;
    color: #fff;
    cursor: pointer;
    font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
      Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif,
      Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
    font-size: 100%;
    font-weight: 900;
    margin-left: 100px;
    line-height: 1.5;
    margin: 0;
  
    -webkit-mask-image: -webkit-radial-gradient(#000, #fff);
    padding: 0;
    text-transform: uppercase;
  }
  .stop:disabled {
    cursor: default;
  }
  .stop:-moz-focusring {
    outline: auto;
  }
  .stop svg {
    display: block;
    vertical-align: middle;
  }
  .stop [hidden] {
    display: none;
  }
  .stop {
    border-radius: 99rem;
    border-width: 2px;
    overflow: hidden;
    padding: 0.8rem 3rem;
    position: relative;
  }
  .stop span {
    mix-blend-mode: difference;
  }
  .stop:before {
    background: #fff;
    content: "";
    display: block;
    height: 100%;
    left: -100%;
    position: absolute;
    top: 0;
    transform: skew(0deg) translateX(-20%);
    transition: transform 0.2s ease;
    width: 120%;
  }
  .stop:hover:before {
    transform: skew(45deg) translateX(75%);
  }
  
  .dropdown button {
    background-color: #000;
    padding: 10px 15px;
    color: white;
    border-color: white;
    cursor: pointer;
    font-size: 17px;
    border-radius: 5px;
  }
  
  .dropdown {
    display: inline-block;
    min-width: 100px;
    margin-top: 25px;
    margin-left: 950px;
  }
  
  .dropdown a {
    display: block;
    color: white;
    text-decoration: none;
    padding: 10px 15px;
  }
  
  .dropdown .content {
    display: none;
    position: absolute;
    background-color: #000;
    color: white;
    min-width: 100px;
    box-shadow: 2px 2px 5px hsla(0, 0%, 0%, 0.8);
  }
  
  .dropdown:hover .content {
    display: block;
  }
  
  .dropdown:hover button {
    background-color: white;
    color: black;
  }
  
  .dropdown a:hover {
    background-color: white;
    color: black;
  
    
  }
  
  #pic {
    width: 100%;
    margin-left: 60px;
    border: 5px solid white;
    border-radius: 30px;
    box-shadow: 6px 6px 2px hsla(0, 0%, 70%, 0.2);
  }

  .csvTable {
    margin-left: 300px; /* Add your desired left margin value here */
    
  }
  
  </style>
  


